{"version":3,"file":"_axiosCredentials_oAUTH.js","sourceRoot":"","sources":["../../../../../src/private/auth/axiosCredentials_oAUTH/_axiosCredentials_oAUTH.ts"],"names":[],"mappings":";;;AAAA,wDAAyC;AAOzC,mDAAkD;AAClD,6CAA4C;AAC/B,QAAA,sBAAsB,GAAG,UACpC,OAA4B;;;;;gBAEtB,KAAgC,+BAAc,CAAC,OAAO,CAAC,EAArD,YAAY,kBAAA,EAAE,WAAW,iBAAA,CAA6B;gBACxD,WAAW,GAAG;oBAClB,GAAG,EAAK,WAAW,CAAC,OAAO,kBAAe;oBAC1C,MAAM,EAAE;wBACN,UAAU,EAAE,eAAe;wBAC3B,aAAa,EAAE,YAAY;qBAC5B;iBACF,CAAC;gBACgB,qBAAM,eAAK,CAAC,WAAW,CAAC,EAAA;;gBAApC,QAAQ,GAAG,CAAC,SAAwB,CAEzC;gBAED,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;oBAClB,MAAM,IAAI,KAAK,CACb,4DAA4D,CAC7D,CAAC;iBACH;gBAED,sBAAO,yBAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,EAAC;;;KAC3C,CAAC","sourcesContent":["import { default as axios } from 'axios';\nimport {\n  AxiosIntrospectRes,\n  Credentials,\n  IRefreshCreds,\n  QuestradeAPIOptions,\n} from '../../../typescript';\nimport { _validateToken } from './_validateToken';\nimport { _writeToken } from './_writeToken';\nexport const _oAuthAxiosCredentials = async (\n  options: QuestradeAPIOptions\n): Promise<Credentials> => {\n  const { refreshToken, credentials } = _validateToken(options);\n  const axiosConfig = {\n    url: `${credentials.authUrl}/oauth2/token`,\n    params: {\n      grant_type: 'refresh_token',\n      refresh_token: refreshToken,\n    },\n  };\n  const response = (await axios(axiosConfig)) as AxiosIntrospectRes<\n    IRefreshCreds\n  >;\n\n  if (!response.data) {\n    throw new Error(\n      '!! validate credntials Invalid data back from axios client'\n    );\n  }\n\n  return _writeToken(credentials, response);\n};\n"]}