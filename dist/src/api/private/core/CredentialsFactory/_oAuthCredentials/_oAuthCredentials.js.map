{"version":3,"file":"_oAuthCredentials.js","sourceRoot":"","sources":["../../../../../../../src/api/private/core/CredentialsFactory/_oAuthCredentials/_oAuthCredentials.ts"],"names":[],"mappings":";;;AAAA,0DAAqE;AAErE,qDAAkD;AAClD,+CAA2D;AAE9C,QAAA,iBAAiB,GAAG,CAAC,SAAsB,eAAK,EAAE,EAAE,CAAC,KAAK,EACrE,KAAa,EACS,EAAE;IACxB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,+BAAc,CAAC,KAAK,CAAC,CAAC;IAC5D,MAAM,WAAW,GAAG;QAClB,GAAG,EAAE,GAAG,WAAW,CAAC,OAAO,eAAe;QAC1C,MAAM,EAAE;YACN,UAAU,EAAE,eAAe;YAC3B,aAAa,EAAE,YAAY;SAC5B;KACF,CAAC;IACF,MAAM,QAAQ,GAAiC,MAAM,MAAM,CAAC,WAAW,CAAC,CAAC;IAEzE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;QAClB,MAAM,IAAI,KAAK,CACb,4DAA4D,CAC7D,CAAC;KACH;IACD,OAAO,yBAAW,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;AAC5C,CAAC,CAAC","sourcesContent":["import { AxiosResponse, AxiosStatic, default as axios } from 'axios';\nimport { Credentials } from '../../../../typescript';\nimport { _validateToken } from './_validateToken';\nimport { IRefreshCreds, _writeToken } from './_writeToken';\n\nexport const _oAuthCredentials = (_axios: AxiosStatic = axios) => async (\n  token: string\n): Promise<Credentials> => {\n  const { refreshToken, credentials } = _validateToken(token);\n  const axiosConfig = {\n    url: `${credentials.authUrl}/oauth2/token`,\n    params: {\n      grant_type: 'refresh_token',\n      refresh_token: refreshToken,\n    },\n  };\n  const response: AxiosResponse<IRefreshCreds> = await _axios(axiosConfig);\n\n  if (!response.data) {\n    throw new Error(\n      '!! validate credntials Invalid data back from axios client'\n    );\n  }\n  return _writeToken(credentials, response);\n};\n"]}